(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[590],{9407:function(e,t,s){"use strict";var a=s(29222);let n=a.Z.create({baseURL:"https://api.zon.uz"});n.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),n.interceptors.response.use(function(e){return e},function(e){let t=e.response.data&&e.response.data.data?e.response.data.data:"",s={chatId:"-1001680830242",text:"\uD83D\uDCDB <b>Error</b> \uD83D\uDCDB\n<b>Path</b>:  ".concat(e.request.responseURL,"\n<b>Status</b>:   ").concat(e.response.status,"\n<b>Response params</b>:   ").concat(t,"\n<b>Description</b>: ").concat(e.message)};return a.Z.post("".concat("https://api.zon.uz","/smart/telegram/send"),s,{auth:{username:"1000000999",password:"3sMZxacU8qK7St97Wo6X6Abg2FZF60pf"}}),Promise.reject(e)}),t.Z=n},31373:function(e,t,s){"use strict";var a=s(29222),n=s(47713),r=s(51882);let i=!1,o=a.Z.create({baseURL:"https://api.zon.uz"});o.interceptors.request.use(e=>{let t=(0,n.getCookie)("jwt"),s=JSON.parse(t).access_token;e.headers={Authorization:"Bearer ".concat(s),Accept:"application/json"};let a=(0,n.getCookie)("interfaceId"),r=(0,n.getCookie)("docInterfaceId");return a&&a!==r&&((0,n.setCookie)("docInterfaceId",a,{domain:".foodee.menu",path:"/"}),window.location.reload()),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{let t=(0,n.getCookie)("jwt");if(t){let s=JSON.parse(t).refresh_token,o=e.config;if(401===e.response.status&&!o._retry&&(o._retry=!0,!i))return await a.Z.post("".concat("https://api.zon.uz","/auth/token/refresh"),{refreshToken:s}).then(e=>{i=!1,(0,n.setCookie)("jwt",{access_token:e.data.data.access,refresh_token:e.data.data.refresh},{domain:".foodee.menu",path:"/",maxAge:(0,r.LI)()}),o.headers={Authorization:"Bearer ".concat(e.data.data.access),Accept:"application/json"}}).catch(e=>{(0,n.deleteCookie)("jwt",{path:"/",domain:".foodee.menu"})}),(0,a.Z)(o)}else(0,n.deleteCookie)("jwt",{path:"/",domain:".foodee.menu"});return Promise.reject(e)}),t.Z=o},51882:function(e,t,s){"use strict";s.d(t,{LI:function(){return r},ln:function(){return n},ml:function(){return a}});let a=e=>{let t=new Date(e).toISOString().slice(0,10),s=new Date(e).getHours(),a=new Date(e).getMinutes();return t.split("-").reverse().join(".")+"\xa0\xa0"+s+":"+(a<10?"0"+a:a)},n=e=>{if(!e)return"";let[t,s]=e.split(":"),a="".concat(t,":").concat(s);return a},r=()=>{let e=new Date;return e.setDate(e.getDate()+10)}},94544:function(e,t,s){"use strict";s.d(t,{H:function(){return n},SC:function(){return r}});let a=(e,t)=>{if(Number(e)===e&&e%1!=0){var s=(e/100).toFixed(t).toString().split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),s.join(".")}if(!e)return 0;var s=(e/100).toFixed(t).toString().split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),s.join(".")},n=e=>{let t=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{2})(\d{3})(\d{2})(\d{2})$/);if(t)return"+"+t[1]+" "+t[2]+"-"+t[3]+"-"+t[4]+"-"+t[5]},r=(e,t)=>{switch(e.format){case"nameAfterPrice":if(e.name)return a(t,e.decimal)+" "+e.name.toLowerCase();return a(t,e.decimal)+" "+e.isoCode.toUpperCase();case"symbolBeforePrice":if(e.symbol)return e.symbol.toUpperCase()+a(t,e.decimal);return a(t,e.decimal)+" "+e.isoCode.toUpperCase();case"symbolAfterPrice":if(e.symbol)return a(t,e.decimal)+" "+e.symbol.toUpperCase();return a(t,e.decimal)+" "+e.isoCode.toUpperCase();default:return a(t,e.decimal)+" "+e.isoCode.toUpperCase()}}},80271:function(e,t,s){"use strict";s.d(t,{L:function(){return o},N:function(){return i}});var a=s(9407),n=s(47713),r=s(51882);let i=e=>{let{restaurantId:t,feedback:s}=e;a.Z.get("/auth/utils/id").then(e=>{let a=e.data;(0,n.setCookie)("authState",a,{path:"/",domain:".foodee.menu"}),t?window.location.href="".concat("https://zon.uz","/account/auth/signin?providerId=foodee&callbackUrl=").concat("https://foodee.menu","/").concat(t,"?feedback=").concat(s,"&state=").concat(a):window.location.href="".concat("https://zon.uz","/account/auth/signin?providerId=foodee&callbackUrl=").concat("https://foodee.menu","&state=").concat(a)})},o=e=>{let{code:t,refresh:s}=e,i=(0,n.getCookie)("authState");a.Z.post("/auth/sso/token",{code:t,state:i},{auth:{username:"1000000999",password:"3sMZxacU8qK7St97Wo6X6Abg2FZF60pf"}}).then(e=>{(0,n.setCookie)("jwt",{access_token:e.data.data.access,refresh_token:e.data.data.refresh,userId:e.data.data.uid},{domain:".foodee.menu",path:"/",maxAge:(0,r.LI)()}),s()})}},50622:function(e,t,s){"use strict";s.d(t,{R:function(){return n}});let a={en:()=>s.e(421).then(s.t.bind(s,47421,19)).then(e=>e.default),ru:()=>s.e(923).then(s.t.bind(s,49923,19)).then(e=>e.default),uz:()=>s.e(278).then(s.t.bind(s,7278,19)).then(e=>e.default)},n=async e=>"uz"===e?a.uz():"en"===e?a.en():a.ru()},28432:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var a=s(57437),n=s(41557);s(33461);var r=s(2265),i=s(91279),o=s(46800),c=s(1102),l=s(61396),d=s.n(l),u=s(35447),x=s(39576),p=s(9407),m=s(24033),f=s(74153),h=s(51882),j=s(31373),b=s(47713),g=s(36953),v=s(2996),y=s(9805),w=s(38179);function N(e){let{fetchData:t,handleClose:s,url:n,id:i,title:o,text:c}=e,[l,d]=(0,r.useState)(!1),{enqueueSnackbar:u}=(0,g.Ds)();function x(){d(!1),s&&s()}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{onClick:()=>{d(!0)},children:o}),(0,a.jsx)(y.u,{appear:!0,show:l,as:r.Fragment,children:(0,a.jsxs)(w.V,{as:"div",className:"relative z-[99999]",onClose:x,children:[(0,a.jsx)(y.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(y.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(w.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsx)(w.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:c}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{j.Z.delete(n+i).then(e=>{t(),s(),d(!1)}).catch(e=>{console.log(e),e.response&&1200!==e.response.data.code&&u(e.response.data.data,{variant:"error"})})},className:"inline-flex justify-center rounded-md border border-transparent bg-[#FFE2E5] px-4 py-2 text-sm font-medium text-[#000] hover:bg-red focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",children:"Удалить"}),(0,a.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-200 px-4 py-2 text-sm font-medium text-[#000] hover:bg-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:x,children:"Отменить"})]})]})})})})]})})]})}var k=s(80271),C=s(21884),_=s(50622),T=s(62896);function F(e){let[t,s]=(0,r.useState)(!1),[l,y]=(0,r.useState)(!1),[w,F]=(0,r.useState)([]),[z,B]=(0,r.useState)({}),[Z,A]=(0,r.useState)({rating:0,text:"",hasFeedback:!1,dateTime:new Date,customerName:"Alisher",id:""}),S=(0,v.C)(e=>e.states.language),D=(0,m.useSearchParams)(),I=D.get("code"),G=(0,m.useParams)(),P=(0,m.useRouter)(),E=D.get("feedback"),R=(0,b.hasCookie)("jwt"),{enqueueSnackbar:L}=(0,g.Ds)(),U=(0,v.C)(e=>e.profile.account.user),V=(0,m.usePathname)(),[O,W]=(0,r.useState)({}),[H,q]=(0,r.useState)(0),K=async()=>{let e=await (0,_.R)(S);W(e.feedBackDrawer)},M=async()=>{await j.Z.get("/feedbacks/user/".concat(G.restaurantId)).then(e=>{let t=e.data.data;t&&A({rating:t.rating,text:t.text,hasFeedback:!0,dateTime:t.dateTime,customerName:U.name,id:t.id})}).catch(e=>{console.log(e)})};(0,r.useEffect)(()=>{E&&!e.widen&&(I&&(0,k.L)({code:I,refresh:function(){P.replace(V)}}),s(!0),y(!0))},[e.widen]),(0,r.useEffect)(()=>{if(K(),t){let e={ownerId:G.restaurantId,sort:"dateDesc",limit:12,page:1};Promise.all([p.Z.post("/feedbacks/paging",e),p.Z.get("/feedbacks/statistics/".concat(G.restaurantId))]).then(e=>{let t=e[0].data.data,s=e[1].data.data;q(t.count),F(t.items),B(s)})}R&&t&&M()},[t,S]);let X=()=>{s(!1),y(!1),A({rating:0,text:"",hasFeedback:!1,dateTime:new Date,customerName:"Alisher",id:""}),G.feedback&&P.replace("/".concat(G.restaurantId))},Q=()=>{s(!1)};return(0,a.jsxs)("div",{children:[e.drawer?(0,a.jsx)(u.Z,{btnType:"drawerTypeBg",onClick:()=>s(!0),children:O.feedbacks}):(0,a.jsxs)("div",{className:"bg-[#fff]/[0.15] rounded-[10px] h-[38px] w-auto px-2 flex items-center justify-center gap-2 cursor-pointer",onClick:()=>s(!0),children:[(0,a.jsx)(i.G,{icon:o.Tab,size:"lg",color:"links"===e.direction?"#345488":"#fff"}),(0,a.jsx)("span",{className:"".concat("links"===e.direction?"text-[#345488]":"text-[#fff]"," font-semibold text-[18px] mt-[2px]"),children:"5.0"}),(0,a.jsx)("hr",{className:"border-0 h-full w-[1px] bg-[#fff]/[0.15]"}),(0,a.jsx)("span",{className:"text-[#fff]/[0.7]",children:O.feedbacks})]}),(0,a.jsx)(n.Z,{open:t,onClose:()=>X(),direction:"bottom",className:"rounded-tr-3xl rounded-tl-3xl ".concat(e.widen?"":"absolute max-sm:!w-[100%] lg:!w-[40%] xl:!w-[25%] !m-auto"),size:"95%",duration:300,zIndex:999,lockBackgroundScroll:!0,style:{overflow:"scroll"},children:(0,a.jsxs)("div",{className:"mb-6 h-[auto] overflow-scroll",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 sm:px-6 mt-4",children:[(0,a.jsx)("span",{className:"text-[18px] font-bold leading-6 truncate w-[90%] text-center",children:e.data.heading}),(0,a.jsx)("button",{type:"button",className:"rounded-md text-gray-400 hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-white",onClick:X,children:(0,a.jsx)(i.G,{icon:c.WA2,size:"2x",color:"#C2A3E5"})})]}),(0,a.jsx)("hr",{className:"mt-4 border-[#74859E]"}),l?(0,a.jsxs)("form",{children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-10 mt-4",children:(0,a.jsx)(x.i,{size:45,transition:!0,SVGstyle:{marginLeft:"10px",marginRight:"10px"},fillColor:"#671ABF",onClick:e=>{A(t=>({...t,rating:e}))},initialValue:Z.rating})}),(0,a.jsx)("div",{className:"py-4 px-6",children:(0,a.jsx)("textarea",{className:"border-2 border-gray-300 p-4 w-full rounded-lg focus:outline-0",placeholder:O.comment,rows:12,maxLength:600,onChange:e=>{let{value:t}=e.target;A(e=>({...e,text:t}))},required:!0,defaultValue:Z.text})}),(0,a.jsxs)("div",{className:"text-center text-[14px] px-6",children:[O.attention,(0,a.jsx)(d(),{href:"".concat("https://api.zon.uz","/page/publishing-rules"),className:"cursor-pointer border-b-2 border-[#007aff] border-dotted text-[#007aff] p-0 hover:text-blue-900 hover:border-blue-900 select-none",children:(0,a.jsxs)("span",{children:[" ",O.publishingRules]})})]}),(0,a.jsx)("div",{className:"px-12 mt-10",onClick:()=>{let e={ownerTypeId:"restaurant",ownerId:G.restaurantId,rating:Z.rating,text:Z.text};0===e.rating&&L("Поставьте оценку от 1 до 5",{variant:"error"}),e.text||L("Напишите комментарий пожалуйста",{variant:"error"}),0!==e.rating&&e.text&&j.Z.post("/feedbacks/user",e).then(e=>{X()}).catch(e=>{1200!==e.response.data.code&&L(e.response.data.data,{variant:"error"})})},children:(0,a.jsx)(u.Z,{btnType:"drawerTypeBg",type:"button",children:O.writeFeedback})})]}):(0,a.jsxs)("div",{className:"px-6 flex flex-col gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"font-bold text-[18px]",children:[O.feedbacks," ",H]}),(0,a.jsx)(d(),{href:"".concat("https://api.zon.uz","/page/publishing-rules"),className:"cursor-pointer border-b-2 border-[#007aff] border-dotted text-[#007aff] p-0 hover:text-blue-900 hover:border-blue-900 select-none",children:(0,a.jsx)("span",{className:"font-[500]",children:O.publishingRules})})]}),0===w.length?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{children:O.noFeedbacks}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{className:"text-blue-900/[0.6] mb-5",children:O.shareYourThoughts}),(0,a.jsx)("div",{className:"p-1 px-1",onClick:()=>Q(),children:(0,a.jsx)(C.Z,{setWriteFeedback:y,setOpen:s,dictionary:O})})]}):(0,a.jsx)("div",{children:(0,a.jsx)(f.default,{statistics:z,setWriteFeedback:y,setOpen:s,dictionary:O})}),(0,a.jsx)("div",{children:Z.hasFeedback?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between relative",children:[(0,a.jsx)("p",{className:"text-[18px] font-bold",children:Z.customerName}),Z.id&&(0,a.jsx)(N,{fetchData:M,url:"/feedbacks/user/",id:Z.id,handleClose:X,title:(0,a.jsxs)("p",{className:"text-[14px] text-center bg-[#f5f5f5] rounded absolute right-2 top-6 px-2",children:[O.delete," ",(0,a.jsx)(i.G,{icon:c.Vui,color:"#F64F61"})]}),text:"Вы действительно хотите удалить отзыв?"}),(0,a.jsx)(x.i,{size:20,initialValue:Z.rating,allowFraction:!0,readonly:!0,fillColor:"#671ABF"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-[14px]",children:(0,h.ml)(Z.dateTime)}),(0,a.jsx)("p",{children:Z.text})]}):w.slice(0,1).map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.G,{icon:T.m08,size:"xl",color:"#5489AB"}),(0,a.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,a.jsx)("p",{className:"text-[16px] font-[500]",children:e.customerName}),(0,a.jsx)("p",{className:"text-gray-400 text-[14px]",children:(0,h.ml)(e.dateTime)})]})]}),(0,a.jsx)(x.i,{size:20,initialValue:e.rating,allowFraction:!0,readonly:!0,fillColor:"#671ABF"})]}),(0,a.jsx)("p",{className:"line-clamp-3",children:e.text}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"p-1 px-1",onClick:()=>P.push("/".concat(G.restaurantId,"/feedbacks")),children:(0,a.jsx)(u.Z,{btnType:"drawerType",children:(0,a.jsx)("p",{className:"text-[16px]",children:O.seeAll})})})]},e.id))})]})]})})]})}},74153:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(57437),n=s(39576),r=s(91279),i=s(46800),o=s(2265),c=s(21884);function l(e){let{statistics:t,setWriteFeedback:s,shortView:l,setOpen:d,dictionary:u}=e,[x,p]=(0,o.useState)(!1);return(0,a.jsxs)("div",{className:"border rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-[24px] font-bold",children:((t.averageRating?t.averageRating:0)/10).toFixed(1)}),(0,a.jsx)(n.i,{size:20,initialValue:t.averageRating/10,allowFraction:!0,readonly:!0,fillColor:"#671ABF"})]}),(0,a.jsx)("p",{className:"text-gray-600 cursor-pointer text-[14px]",onClick:()=>{p(!x)},children:x?"Скрыть":"Подробно..."})]}),(0,a.jsx)("hr",{className:x?"":"hidden"}),(0,a.jsx)("div",{className:"px-4 p-1 ".concat(x?"":"hidden"),children:t.ratings&&t.ratings.map(e=>(0,a.jsx)("div",{className:"py-[3px]",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"w-2 flex items-center justify-center",children:e.star}),(0,a.jsx)(r.G,{icon:i.Tab,color:"#671ABF",className:"mt-[-2px]"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-300 rounded-lg",children:(0,a.jsx)("div",{className:"bg-[#671ABF] h-[5px] rounded-lg text-xs leading-none text-center text-gray-300",style:{width:"".concat(e.percent,"%")}})})]}),(0,a.jsxs)("p",{className:"text-left w-10",children:[e.percent,"%"]})]})},e.rating))}),s?(0,a.jsx)("div",{className:"p-2 px-4",onClick:()=>d(!1),children:(0,a.jsx)(c.Z,{setWriteFeedback:s,setOpen:d,dictionary:u})}):""]})}},21884:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var a=s(57437),n=s(2265),r=s(9805),i=s(38179),o=s(35447),c=s(80271),l=s(47713),d=s(24033);function u(e){let{setWriteFeedback:t,setOpen:s,dictionary:u}=e,[x,p]=(0,n.useState)(!1),m=(0,l.hasCookie)("jwt"),f=(0,d.useParams)();return(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Z,{btnType:"drawerTypeBg",onClick:()=>p(!0),children:(0,a.jsx)("p",{className:"text-[16px]",children:u.leaveFeedback})}),(0,a.jsx)(r.u.Root,{show:x,as:n.Fragment,children:(0,a.jsxs)(i.V,{as:"div",className:"relative z-[999999]",onClose:p,children:[(0,a.jsx)(r.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto max-sm:!w-[100%] lg:!w-[40%] xl:!w-[25%] !m-auto",children:(0,a.jsx)("div",{className:"min-h-full items-center justify-center p-4 text-center flex sm:p-0",children:(0,a.jsx)(r.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)(i.V.Panel,{className:"relative transform overflow-hidden rounded-[10px] bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg !w-[80%] max-sm:!w-full",children:[(0,a.jsx)("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:(0,a.jsx)("div",{className:"sm:flex sm:items-start",children:(0,a.jsxs)("div",{className:"m-auto text-center",children:[(0,a.jsx)(i.V.Title,{as:"h2",className:"text-base leading-6 text-gray-900 text-center font-bold text-[18px]",children:u.useZonAccount}),(0,a.jsx)("p",{className:"mt-2",children:u.useZonAccountText})]})})}),(0,a.jsxs)("div",{className:" bg-gray-50 px-4 py-3 flex gap-4",children:[(0,a.jsx)(o.Z,{btnType:"drawerTypeBg",onClick:()=>{m?(t(!0),s(!0)):(0,c.N)({restaurantId:f.restaurantId,feedback:!0})},children:(0,a.jsx)("p",{children:u.leaveFeedback})}),(0,a.jsx)(o.Z,{type:"button",btnType:"drawerType",onClick:()=>p(!1),children:u.cancel})]})]})})})})]})})]})}},53027:function(e,t,s){"use strict";s.d(t,{Z:function(){return w}});var a=s(57437),n=s(91279),r=s(1102),i=s(46800),o=s(2265),c=s(41557);s(33461);var l=s(94544),d=s(51882),u=s(61396),x=s.n(u),p=s(2996),m=s(50622),f=s(16691),h=s.n(f),j=s(35447),b=s(28432),g=s(16162),v=s.n(g),y=s(62);function w(e){var t,s,u,f,g,w,N,k,C,_,T,F,z,B,Z,A;let{border:S,data:D}=e,[I,G]=(0,o.useState)(!1),[P,E]=(0,o.useState)({}),R=(0,p.C)(e=>e.states.language),L=(0,p.C)(e=>e.restaurant.info),[U,V]=(0,o.useState)({sum:0,percent:0}),O=async()=>{let e=await (0,m.R)(R);E(e.menu)};return o.useEffect(()=>{let e=L.find(e=>e.restaurantId.toString()===D.id.toString());if(e){let t=e.cart.reduce((e,t)=>e+t.finalPrice*t.amount,0);e.servicePercent>0&&V({sum:t*e.servicePercent/100,percent:e.servicePercent})}O()},[L]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{onClick:()=>G(!0),children:(0,a.jsx)("div",{className:v().container,children:(0,a.jsxs)("div",{className:v().cube,children:[(0,a.jsx)("div",{className:[v().face,v().left].join(" "),children:(0,a.jsx)(n.G,{icon:r.jGC,size:"xl",color:"#6682A9"})}),(0,a.jsx)("div",{className:[v().face,v().right].join(" "),children:(0,a.jsx)(n.G,{icon:y.Zzi,size:"xl",color:"#6682A9"})}),(0,a.jsx)("div",{className:[v().face,v().front].join(" "),children:(0,a.jsx)(n.G,{icon:r.j1w,size:"xl",color:"#6682A9"})}),(0,a.jsx)("div",{className:[v().face,v().back].join(" "),children:(0,a.jsx)(n.G,{icon:r.opg,size:"xl",color:"#6682A9"})})]})})}),(0,a.jsx)(c.Z,{open:I,onClose:()=>G(!1),direction:"bottom",className:"rounded-tr-3xl rounded-tl-3xl absolute max-sm:!w-[100%] lg:!w-[40%] xl:!w-[25%] !m-auto",size:"auto",duration:300,zIndex:999,lockBackgroundScroll:!0,children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 sm:px-6 mt-4",children:[(0,a.jsxs)("span",{className:"text-[18px] font-bold leading-6 truncate w-[90%] text-center text-gray-900 flex items-center gap-4",children:[D&&D.logo?(0,a.jsx)(h(),{src:"".concat("https://api.zon.uz").concat(D.logo.src),alt:D.alias,width:50,height:50,className:"rounded-[50%] border border-[#671ABF] p-[2px]"}):null," ",D.alias]}),(0,a.jsx)("button",{type:"button",className:"rounded-md text-gray-400 hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-white",onClick:()=>G(!1),children:(0,a.jsx)(n.G,{icon:i.WA2,size:"2x",color:"#C2A3E5"})})]}),(0,a.jsx)("hr",{className:"mt-4 border-[#671ABF]"}),(0,a.jsxs)("div",{className:"text-[16px]",children:[D.profile&&D.profile.instagram?(0,a.jsx)(x(),{href:"https://instagram.com/".concat(null===(t=D.profile)||void 0===t?void 0:t.instagram),target:"_blank",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b py-4 border-[#D0D7E1] px-5",children:[(0,a.jsx)(h(),{src:"https://api.zon.uz/files/images/instagram-logo.png",alt:null===(s=D.profile)||void 0===s?void 0:s.instagram,width:40,height:40}),(0,a.jsxs)("span",{className:"text-[#A9368A] font-bold",children:["@",null===(u=D.profile)||void 0===u?void 0:u.instagram]})]})}):null,(null===(f=D.profile)||void 0===f?void 0:f.phoneNumber)?(0,a.jsx)(x(),{href:"tel:+".concat(null===(g=D.profile)||void 0===g?void 0:g.phoneNumber),children:(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b py-4 border-[#D0D7E1] px-6 font-semibold",children:[(0,a.jsx)(n.G,{icon:r.j1w,size:"xl",color:"#671ABF",className:"w-8"}),(0,a.jsx)("span",{children:(0,l.H)(null===(w=D.profile)||void 0===w?void 0:w.phoneNumber)})]})}):(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b py-4 border-[#D0D7E1] px-6",children:[(0,a.jsx)(n.G,{icon:r.j1w,size:"xl",color:"#671ABF",className:"w-8"}),(0,a.jsx)("span",{children:(0,l.H)(null===(N=D.profile)||void 0===N?void 0:N.phoneNumber)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b py-4 border-[#D0D7E1] px-6",children:[(0,a.jsx)(n.G,{icon:r.opg,size:"xl",color:"#671ABF",className:"w-8"}),(0,a.jsx)("span",{children:null===(k=D.profile)||void 0===k?void 0:k.address})]}),D.occupationType&&"100"!==D.occupationType.id?(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b py-4 border-[#D0D7E1] px-6",children:[(0,a.jsx)(n.G,{icon:r.jGC,size:"xl",color:"#671ABF",className:"w-8"}),(0,a.jsxs)("span",{children:["Обслуживание ",U?U.percent:0,"%"]})]}):null,D.occupationType&&"100"!==D.occupationType.id?(0,a.jsxs)("div",{className:"flex items-center gap-4 py-4 border-b px-7",children:[(0,a.jsx)(n.G,{icon:r.UgQ,size:"xl",color:"#671ABF",className:"w-8"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{children:[P.weekdays,(0,d.ln)(null===(C=D.profile)||void 0===C?void 0:C.weekdaysTimeFrom)&&(0,d.ln)(null===(_=D.profile)||void 0===_?void 0:_.weekdaysTimeTo)?" ".concat(P.from," ").concat((0,d.ln)(null===(T=D.profile)||void 0===T?void 0:T.weekdaysTimeFrom)," ").concat(P.to," ").concat((0,d.ln)(null===(F=D.profile)||void 0===F?void 0:F.weekdaysTimeTo)):""]}),(0,a.jsxs)("span",{children:[P.weekend,(0,d.ln)(null===(z=D.profile)||void 0===z?void 0:z.weekendsTimeFrom)&&(0,d.ln)(null===(B=D.profile)||void 0===B?void 0:B.weekendsTimeTo)?" ".concat(P.from," ").concat((0,d.ln)(null===(Z=D.profile)||void 0===Z?void 0:Z.weekendsTimeFrom)," ").concat(P.to," ").concat((0,d.ln)(null===(A=D.profile)||void 0===A?void 0:A.weekendsTimeTo)):""]})]})]}):null,(0,a.jsxs)("div",{className:"grid grid-cols-2 justify-between items-center gap-[15%] py-10 px-10",children:[(0,a.jsx)(b.default,{data:D,drawer:!0,onClose:G,widen:!0}),(0,a.jsx)(j.Z,{btnType:"drawerTypeBg",onClick:e=>{e.preventDefault(),e.stopPropagation(),window.location.href="https://foodee.link/".concat(D.slug)},children:"Визитка"})]})]})]})})]})}},24776:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(57437),n=s(91279),r=s(46800),i=s(2265),o=s(41557);s(33461);var c=s(1102),l=s(55294),d=s(2996),u=s(65807),x=s(24033),p=s(35447),m=s(50622);let f=[{id:"ru",name:"Русский"},{id:"uz",name:"O'zbekcha"},{id:"en",name:"English"}];function h(e){let t=(0,d.C)(e=>e.states.language),s=(0,d.T)(),[h,j]=(0,i.useState)(!1),[b,g]=(0,i.useState)({name:"",id:""}),v=(0,x.useRouter)(),[y,w]=(0,i.useState)({}),N=async()=>{let e=await (0,m.R)(t);w(e.selectLanguageDrawer)};(0,i.useEffect)(()=>{N(),g(f.find(e=>e.id===t))},[t]);let k=t=>{s((0,u.m0)(t.id)),g(t),j(!1),e.setOpen&&e.setOpen(!1),v.refresh()};return(0,a.jsxs)("div",{children:[e.drawer?(0,a.jsxs)("div",{className:"flex items-center gap-3 px-5 py-[10px] border-b activeLink",onClick:()=>j(!0),children:[(0,a.jsx)(n.G,{icon:c.BCn,size:"xl",color:"#671ABF",className:"w-7"}),(0,a.jsx)("p",{className:"font-[500]",children:b?b.name:""})]}):(0,a.jsx)("div",{className:"bg-[#fff]/[0.15] rounded-[10px] h-[38px] w-[45px] flex items-center justify-center cursor-pointer",onClick:()=>j(!0),children:(0,a.jsx)("p",{className:"text-white font-semibold",children:b?b.id.toUpperCase():""})}),(0,a.jsx)(o.Z,{open:h,onClose:()=>j(!1),direction:"bottom",className:"rounded-tr-3xl rounded-tl-3xl absolute max-sm:!w-[100%] lg:!w-[".concat(e.lg,"] xl:!w-[").concat(e.xl,"] !m-auto"),size:"45vh",duration:300,zIndex:999,lockBackgroundScroll:!0,children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 mt-4",children:[(0,a.jsx)("span",{className:"text-[18px] font-bold leading-6 truncate w-[90%] text-center",children:y.title}),(0,a.jsx)("button",{type:"button",className:"rounded-md text-gray-400 hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-white",onClick:()=>j(!1),children:(0,a.jsx)(n.G,{icon:r.WA2,color:"#C2A3E5",className:"text-[30px] w-7"})})]}),(0,a.jsx)("hr",{className:"mt-4 border-[#74859E]"}),(0,a.jsx)("div",{children:f.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b px-[25px] border-[#D0D7E1] justify-between activeLink ".concat(b&&b.id===e.id?"text-[#671ABF]":"text-[#74859E]"),onClick:()=>k(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 py-4",children:[(0,a.jsx)(n.G,{icon:c.BCn,size:"xl",color:"#671ABF"}),(0,a.jsx)("span",{className:"".concat(b&&b.id===e.id?"font-bold":"font-normal"," text-[16px]"),children:e.name})]}),(0,a.jsx)(n.G,{icon:b&&b.id===e.id?l.W3K:l.diR,className:"text-[20px]"})]},e.id))}),(0,a.jsx)("div",{className:"m-10 mx-20",onClick:()=>j(!1),children:(0,a.jsx)(p.Z,{btnType:"drawerType",children:y.close})})]})})]})}},35447:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(57437),n=s(52404),r=s.n(n);function i(e){return(0,a.jsx)("button",{disabled:e.disabled,className:[r().Button,r()[e.btnType],e.className].join(" "),onClick:e.onClick,style:e.style,type:e.type,id:e.id,name:e.name,value:e.value,children:e.children},e.keys)}},25179:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(57437),n=s(35447);s(2265);var r=s(80271),i=s(47713),o=s(31373),c=s(24033);function l(e){let{profile:t,handleClose:s}=e,l=(0,i.getCookie)("jwt"),d=(0,c.useRouter)(),u=(0,c.useParams)();return(0,a.jsx)("div",{children:l&&Object.keys(t).length>0?(0,a.jsx)("div",{className:"px-10 w-[300px] mt-4",children:(0,a.jsx)(n.Z,{btnType:"drawerSignOut",onClick:()=>{o.Z.get("/auth/signout").then(e=>{(0,i.deleteCookie)("jwt",{path:"/",domain:".foodee.menu"}),(0,i.deleteCookie)("zonid",{path:"/",domain:".foodee.menu"}),d.refresh(),s()}).catch(e=>{(0,i.deleteCookie)("jwt",{path:"/",domain:".foodee.menu"}),(0,i.deleteCookie)("zonid",{path:"/",domain:".foodee.menu"}),d.refresh(),s(),console.log(e)})},children:(0,a.jsx)("p",{className:"flex items-center gap-4",children:"Выйти"})})}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-[16px] font-bold",children:"Воспользуйтесь Zon Аккаунтом!"}),(0,a.jsx)("p",{className:"text-[14px] px-12",children:"Для того, чтобы оставлять отзывы или пользоваться другими функциями авторизованных пользователей."}),(0,a.jsx)("div",{className:"px-10 w-full mt-4",children:(0,a.jsx)(n.Z,{btnType:"drawerTypeBg",onClick:()=>{(0,r.N)({restaurantId:u.restaurantId?u.restaurantId:""})},children:"Войти или зарегистрироваться"})})]})})}},2996:function(e,t,s){"use strict";s.d(t,{C:function(){return r},T:function(){return n}});var a=s(3198);let n=()=>(0,a.I0)(),r=a.v9},65807:function(e,t,s){"use strict";s.d(t,{aZ:function(){return d},m0:function(){return l},pk:function(){return o}});var a=s(50663),n=s(47713);let r={cardDisplay:"small",productsHasFetched:!1,language:(0,n.getCookie)("lang-zon")||"ru",currency:"sum",hash:"",scrollPosition:""},i=(0,a.oM)({name:"states",initialState:r,reducers:{setDisplay:(e,t)=>({...e,cardDisplay:t.payload}),setFetchedProducts:(e,t)=>({...e,productsHasFetched:t.payload}),setLanguage(e,t){e.language=t.payload,(0,n.setCookie)("lang-zon",t.payload)},setHashChange:(e,t)=>({...e,hash:t.payload}),setScrollY:(e,t)=>({...e,scrollPosition:t.payload})}}),{setDisplay:o,setScrollY:c,setLanguage:l,setHashChange:d}=i.actions;t.ZP=i},16162:function(e){e.exports={container:"bottominfo_container__dW7tj",cube:"bottominfo_cube__Qn4If",turn:"bottominfo_turn__mU5Pr",face:"bottominfo_face__uRpRE",front:"bottominfo_front__1loUL",back:"bottominfo_back__4jZXV",top:"bottominfo_top__5dwBu",bottom:"bottominfo_bottom__jwpL4",right:"bottominfo_right__b7q2C",left:"bottominfo_left__tGTRe"}},52404:function(e){e.exports={Button:"button_Button__5GTRp",signIn:"button_signIn__loNGK",addCart:"button_addCart__toXQF",existCart:"button_existCart__hKTfe",goToCart:"button_goToCart__189oQ",buy:"button_buy__hbx0w",foodeeLogin:"button_foodeeLogin__7tX9G",foodeeSend:"button_foodeeSend__uwjxG",homeFirstButton:"button_homeFirstButton___ecdj",homeSecondButton:"button_homeSecondButton__zgavE",drawerType:"button_drawerType__HdPSF",drawerSignOut:"button_drawerSignOut__LUWy0",drawerTypeBg:"button_drawerTypeBg__HnHpc",approve:"button_approve__TMNzo"}}}]);